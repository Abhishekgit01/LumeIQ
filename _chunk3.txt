op-blur-sm">
                        <Leaf className="w-3 h-3 text-[#34c759]" />
                        <span className="text-[9px] font-bold text-white">{product.co2Saved}</span>
                      </div>
                    </div>
                    {/* Product info */}
                    <div className="p-3">
                      <p className="text-[10px] text-[var(--ios-tertiary-label)] font-medium">{product.brand}</p>
                      <p className="text-[13px] font-semibold text-[var(--ios-label)] mt-0.5 leading-tight line-clamp-2">{product.name}</p>
                      <div className="flex items-center gap-1 mt-1.5">
                        <Star className="w-3 h-3 text-[#ffcc00] fill-[#ffcc00]" />
                        <span className="text-[11px] font-medium text-[var(--ios-label)]">{product.rating}</span>
                        <span className="text-[10px] text-[var(--ios-tertiary-label)]">({product.reviews})</span>
                      </div>
                      <div className="flex items-center gap-1.5 mt-1.5">
                        <span className="text-[15px] font-bold text-[var(--ios-label)]">{'\u20B9'}{product.price}</span>
                        <span className="text-[11px] text-[var(--ios-tertiary-label)] line-through">{'\u20B9'}{product.mrp}</span>
                        <span className="text-[10px] font-bold text-[#34c759]">{discount}% off</span>
                      </div>
                      <div className="flex items-center gap-1 mt-1">
                        <Zap className="w-3 h-3 text-[#ff9f0a]" />
                        <span className="text-[10px] font-semibold text-[#ff9f0a]">+{product.ecoPoints} eco pts</span>
                      </div>
                      <button
                        onClick={() => addToCart(product.id)}
                        className="w-full mt-2.5 py-2 rounded-[10px] bg-[#34c759] text-white text-[12px] font-semibold ios-press flex items-center justify-center gap-1.5"
                      >
                        <ShoppingCart className="w-3.5 h-3.5" />
                        Add to Cart
                      </button>
                    </div>
                  </motion.div>
                );
              })}
            </div>
          </section>

          {/* â•â•â• VERIFY PURCHASE SECTION â•â•â• */}
            <section className="ios-card p-5">
              <div className="flex items-center gap-3 mb-3">
                <div className="w-10 h-10 rounded-[12px] bg-gradient-to-br from-[#007aff] to-[#0055d4] flex items-center justify-center">
                  <Camera className="w-5 h-5 text-white" />
                </div>
                <div className="flex-1">
                  <h2 className="text-[17px] font-semibold text-[var(--ios-label)]">Verify Eco Purchase</h2>
                  <p className="text-[12px] text-[var(--ios-tertiary-label)]">Scan receipt or product for bonus points</p>
                </div>
              </div>
              <p className="text-[12px] text-[var(--ios-secondary-label)] mb-3">
                Take a photo of your eco-friendly purchase and our Google Vision AI will verify it. Earn bonus eco points for verified sustainable shopping!
              </p>
              <div className="flex gap-2">
                <button
                  onClick={() => setCameraOpen(true)}
                  className="flex-1 py-3 rounded-[12px] bg-gradient-to-r from-[#34c759] to-[#30d158] text-white text-[14px] font-semibold ios-press flex items-center justify-center gap-2"
                >
                  <Camera className="w-5 h-5" />
                  Open Camera
                </button>
                <button
                  onClick={() => fileInputRef.current?.click()}
                  className="py-3 px-5 rounded-[12px] bg-[var(--ios-card)] border border-[var(--ios-separator)] text-[14px] font-semibold text-[var(--ios-label)] ios-press flex items-center justify-center gap-2"
                >
                  <Upload className="w-4 h-4" />
                  Gallery
                </button>
              </div>
              <input ref={fileInputRef} type="file" accept="image/*" className="hidden" onChange={handleVerifyPhoto} />
            </section>

            {/* â•â•â• CAMERA CAPTURE OVERLAY â•â•â• */}
            <CameraCapture
              open={cameraOpen}
              onClose={() => setCameraOpen(false)}
              onCapture={handleCameraCapture}
              title="Verify Eco Purchase"
              subtitle="Point camera at eco product or receipt"
            />

          {/* â•â•â• CART FLOATING BAR â•â•â• */}
          <AnimatePresence>
            {cartCount > 0 && (
              <motion.div
                initial={{ y: 100, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                exit={{ y: 100, opacity: 0 }}
                className="fixed bottom-24 left-1/2 -translate-x-1/2 z-40 w-[calc(100%-48px)] max-w-[390px]"
              >
                <div
                  onClick={() => setShowPayModal(true)}
                  className="flex items-center justify-between px-5 py-3.5 rounded-[18px] text-white cursor-pointer ios-press"
                  style={{ background: 'linear-gradient(135deg, #34c759 0%, #248a3d 100%)', boxShadow: '0 4px 20px rgba(52,199,89,0.4)' }}
                >
                  <div className="flex items-center gap-3">
                    <div className="w-9 h-9 rounded-full bg-white/20 flex items-center justify-center">
                      <ShoppingCart className="w-5 h-5 text-white" />
                    </div>
                    <div>
                      <p className="text-[14px] font-bold">Pay Now</p>
                      <p className="text-[11px] text-white/70">{cartCount} items</p>
                    </div>
                  </div>
                  <div className="flex items-center gap-2">
                    <span className="text-[16px] font-bold">{'\u20B9'}{cartTotal}</span>
                    <ChevronRight className="w-5 h-5 text-white/70" />
                  </div>
                </div>
              </motion.div>
            )}
          </AnimatePresence>
        </>
      ) : (
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FINANCE TAB (Marketplace-oriented)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        <>
          {/* â•â•â• ECO WALLET â•â•â• */}
          <section className="ios-card overflow-hidden">
            <div className="p-5" style={{ background: 'linear-gradient(135deg, #34c759 0%, #248a3d 100%)' }}>
              <div className="flex items-center gap-2 mb-1">
                <Wallet className="w-4 h-4 text-white/70" />
                <span className="text-[12px] font-medium text-white/70 uppercase tracking-wider">Marketplace Wallet</span>
              </div>
              <div className="flex items-end justify-between">
                <div>
                  <p className="text-[36px] font-bold text-white tracking-tight">
                    <span className="text-[20px] font-normal text-white/60 mr-1">{'\u20B9'}</span>
                    {ecoBalance.toLocaleString()}
                  </p>
                  <p className="text-[13px] text-white/60 mt-0.5">Earned from eco purchases</p>
                </div>
                <div className="flex flex-col items-end gap-1">
                  <div className="flex items-center gap-1 px-2 py-1 rounded-full bg-white/15">
                    <Award className="w-3 h-3 text-white" />
                    <span className="text-[11px] font-semibold text-white">{totalEcoPoints} pts</span>
                  </div>
                </div>
              </div>
              <div className="flex gap-3 mt-4">
                <div className="flex-1 p-3 rounded-[12px] bg-white/10 backdrop-blur-sm">
                  <div className="flex items-center gap-1.5 mb-1">
                    <ArrowDownLeft className="w-3.5 h-3.5 text-white" />
                    <span className="text-[11px] text-white/50">Earned</span>
                  </div>
                  <p className="text-[17px] font-bold text-white">{'\u20B9'}{monthlyEarned}</p>
                  <p className="text-[10px] text-white/40">From marketplace</p>
                </div>
                <div className="flex-1 p-3 rounded-[12px] bg-white/10 backdrop-blur-sm">
                  <div className="flex items-center gap-1.5 mb-1">
                    <TrendingUp className="w-3.5 h-3.5 text-white" />
                    <span className="text-[11px] text-white/50">Cashback</span>
                  </div>
                  <p className="text-[17px] font-bold text-white">5.2%</p>
                  <p className="text-[10px] text-white/40">Avg return</p>
                </div>
              </div>
            </div>
          </section>

            {/* â•â•â• QUICK ACTIONS â•â•â• */}
            <div className="grid grid-cols-3 gap-2">
              {[
                { icon: CreditCard, label: 'Pay', color: '#007aff', action: () => setShowPayModal(true) },
                { icon: Receipt, label: 'Bills', color: '#ff9f0a', action: () => setShowBillsModal(true) },
                { icon: BadgePercent, label: 'Offers', color: '#ff453a', action: () => rewardsRef.current?.scrollIntoView({ behavior: 'smooth' }) },
              ].map(({ icon: Icon, label, color, action }) => (
                <button key={label} onClick={action} className="ios-card flex flex-col items-center gap-1.5 py-3 ios-press">
                  <div className="w-10 h-10 rounded-[12px] flex items-center justify-center" style={{ backgroundColor: `${color}15` }}>
                    <Icon className="w-5 h-5" style={{ color }} />
                  </div>
                  <span className="text-[11px] font-medium text-[var(--ios-secondary-label)]">{label}</span>
                </button>
              ))}
            </div>

          {/* â•â•â• ECO CREDIT SCORE â•â•â• */}
          <section className="ios-card p-5">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-10 h-10 rounded-[12px] bg-gradient-to-br from-[#30d158] to-[#248a3d] flex items-center justify-center">
                <ShieldCheck className="w-5 h-5 text-white" />
              </div>
              <div>
                <h2 className="text-[17px] font-semibold text-[var(--ios-label)]">Eco Credit Score</h2>
                <p className="text-[12px] text-[var(--ios-tertiary-label)]">Based on marketplace activity</p>
              </div>
            </div>
            <div className="flex items-center justify-center py-6">
              <div className="relative w-40 h-40">
                <svg viewBox="0 0 120 120" className="w-full h-full -rotate-90">
                  <circle cx="60" cy="60" r="52" fill="none" stroke="var(--ios-separator)" strokeWidth="8" />
                  <motion.circle
                    cx="60" cy="60" r="52" fill="none" stroke="#30d158" strokeWidth="8" strokeLinecap="round"
                    strokeDasharray={`${2 * Math.PI * 52}`}
                    initial={{ strokeDashoffset: 2 * Math.PI * 52 }}
                    animate={{ strokeDashoffset: 2 * Math.PI * 52 * (1 - Math.min(iq, 100) / 100) }}
                    transition={{ duration: 1.5, ease: 'easeOut' }}
                  />
                </svg>
                <div className="absolute inset-0 flex flex-col items-center justify-center">
                  <p className="text-[32px] font-bold text-[var(--ios-label)]">{iq}</p>
                  <p className="text-[11px] text-[var(--ios-tertiary-label)]">out of 100</p>
                </div>
              </div>
            </div>
            <div className="grid grid-cols-3 gap-2 mt-2">
              {[
                { label: 'Shopping', value: 'Green', color: '#34c759' },
                { label: 'Transport', value: 'Good', color: '#007aff' },
                { label: 'Lifestyle', value: 'Great', color: '#ff9f0a' },
              ].map(m => (
                <div key={m.label} className="text-center p-2 rounded-[10px] bg-[var(--ios-bg)]">
                  <p className="text-[13px] font-bold" style={{ color: m.color }}>{m.value}</p>
                  <p className="text-[10px] text-[var(--ios-tertiary-label)] mt-0.5">{m.label}</p>
                </div>
              ))}
            </div>
          </section>

          {/* â•â•â• CARBON OFFSET â•â•â• */}
          <section className="ios-card p-5">
            <div className="flex items-center gap-3 mb-3">
              <div className="w-10 h-10 rounded-[12px] bg-gradient-to-br from-[#ff9f0a] to-[#e68600] flex items-center justify-center">
                <TreePine className="w-5 h-5 text-white" />
              </div>
              <div>
                <h2 className="text-[17px] font-semibold text-[var(--ios-label)]">Carbon Offset</h2>
                <p className="text-[12px] text-[var(--ios-tertiary-label)]">Use eco-credits to offset</p>
              </div>
            </div>
            <div className="space-y-2">
              {[
                { name: 'Plant 5 Trees', cost: 150, co2: '25 kg', icon: 'ğŸŒ³' },
                { name: 'Fund Solar Panel', cost: 500, co2: '100 kg', icon: '\u2600\uFE0F' },
                { name: 'Ocean Cleanup', cost: 300, co2: '50 kg', icon: 'ğŸŒŠ' },
              ].map(item => (
                <div key={item.name} className="flex items-center gap-3 p-3 rounded-[12px] bg-[var(--ios-bg)]">
                  <span className="text-[24px]">{item.icon}</span>
                  <div className="flex-1">
                    <p className="text-[14px] font-medium text-[var(--ios-label)]">{item.name}</p>
                    <p className="text-[11px] text-[var(--ios-tertiary-label)]">Offsets {item.co2} CO{'\u2082'}</p>
                  </div>
                  <button className="px-3 py-1.5 rounded-[8px] bg-[#34c759] text-white text-[12px] font-semibold ios-press">
                    {'\u20B9'}{item.cost}
                  </button>
                </div>
              ))}
            </div>
          </section>
        </>
      )}

                  {/* â•â•â• PAY MODAL â•â•â• */}
                  <AnimatePresence>
                    {showPayModal && (
                      <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="fixed inset-0 z-50 bg-black/50 flex items-end justify-center" onClick={() => setShowPayModal(false)}>
                        <motion.div initial={{ y: 300 }} animate={{ y: 0 }} exit={{ y: 300 }} transition={{ type: 'spring', damping: 25 }} className="w-full max-w-[430px] bg-[var(--ios-card)] rounded-t-[24px] p-6" onClick={e => e.stopPropagation()}>
                          <div className="w-10 h-1 rounded-full bg-[var(--ios-separator)] mx-auto mb-5" />
                          <div className="flex items-center gap-3 mb-5">
                            <div className="w-12 h-12 rounded-[14px] bg-[#007aff15] flex items-center justify-center">
 